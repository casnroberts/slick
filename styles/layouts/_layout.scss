$layouts: (
    2 8 2:   "nobreak",
    6 6:     "nobreak",
    4 4 4:   "nobreak",
    3 3 3 3: "",
    9 3:     "nobreak",
    8 4:     "nobreak",
    7 5:     "nobreak"
);
$sublayouts: 3 3, 4 4, 2 1;

@function getGrid($list) {
    @return if(
        first($list) != last($list) and length($list) == 2,
        ( $list, last($list) first($list) ),
        $list
    );
}

@each $columns, $options in $layouts {
    $grid: getGrid($columns);
    @each $item in $grid {
        @if length($item) != 0 {
            [data-layout="#{$item}"] {
                $list: (
                    $screen-sm-min: $item
                );
                @include layout(
                    $layout: $list
                );
            }
            @if contains($options, "nobreak") {
                [data-layout="#{$item} nobreak"] {
                    $list: (
                        $screen-zero: $item
                    );
                    @include layout(
                        $layout: $list,
                        $break: false
                    );
                }
            }
        }
    }
}

@each $columns in $sublayouts {
    $grid: getGrid($columns);
    @each $item in $grid {
        [data-sublayout="#{$columns}"] {
            $list: (
                $screen-sm-min: $columns
            );
            @include layout(
                $layout: $list,
                $base: sum($item),
                $break: false
            );
        }
    }
}

%layout-stacked,
[data-layout="stacked"] {
    > * {
        margin-bottom: $box-padding;
        &:last-child {
            margin-bottom: 0;
        }
    }
}
